/**
 * angular-strap
 * @version v2.0.5 - 2014-11-21
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var e=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF","$parse",function(t,o,n,i,a,r,l,s,c,u){function f(t,i){function a(){return"body"===y.container?s.offset(y.target[0]||t[0]):s.position(y.target[0]||t[0])}function r(e,t,o,n){var i,a=e.split("-");switch(a[0]){case"right":i={top:t.top+t.height/2-n/2,left:t.left+t.width};break;case"bottom":i={top:t.top+t.height,left:t.left+t.width/2-o/2};break;case"left":i={top:t.top+t.height/2-n/2,left:t.left-o};break;default:i={top:t.top-n,left:t.left+t.width/2-o/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=t.left;break;case"right":i.left=t.left+t.width-o}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=t.top-n;break;case"bottom":i.top=t.top+t.height}return i}var f={},m=t[0].nodeName.toLowerCase(),y=f.$options=angular.extend({},e,i);f.$promise=h(y.template);var w=f.$scope=y.scope&&y.scope.$new()||o.$new();if(y.delay)if(angular.isObject(u(y.delay)(w)))y.delay=u(y.delay)(w);else if(angular.isString(y.delay)){var v=y.delay.split(",").map(parseFloat);y.delay=v.length>1?{show:v[0],hide:v[1]}:v[0]}y.title&&(f.$scope.title=y.title),w.$hide=function(){w.$$postDigest(function(){f.hide()})},w.$show=function(){w.$$postDigest(function(){f.show()})},w.$toggle=function(){w.$$postDigest(function(){f.toggle()})},f.$isShown=w.$isShown=!1;var b,k;y.contentTemplate&&(f.$promise=f.$promise.then(function(e){var t=angular.element(e);return h(y.contentTemplate).then(function(e){var o=p('[ng-bind="content"]',t[0]);return o.length||(o=p('[ng-bind="title"]',t[0])),o.removeAttr("ng-bind").html(e),t[0].outerHTML})}));var S,E,T,x;return f.$promise.then(function(e){angular.isObject(e)&&(e=e.data),y.html&&(e=e.replace($,'ng-bind-html="')),e=d.apply(e),T=e,S=n(e),f.init()}),f.init=function(){y.delay&&angular.isNumber(y.delay)&&(y.delay={show:y.delay,hide:y.delay}),"self"===y.container?x=t:angular.isElement(y.container)?x=y.container:y.container&&(x=p(y.container));var e=y.trigger.split(" ");angular.forEach(e,function(e){"click"===e?t.on("click",f.toggle):"manual"!==e&&(t.on("hover"===e?"mouseenter":"focus",f.enter),t.on("hover"===e?"mouseleave":"blur",f.leave),"button"===m&&"hover"!==e&&t.on(g?"touchstart":"mousedown",f.$onFocusElementMouseDown))}),y.target&&(y.target=angular.isElement(y.target)?y.target:p(y.target)[0]),y.show&&w.$$postDigest(function(){"focus"===y.trigger?t[0].focus():f.show()})},f.destroy=function(){for(var e=y.trigger.split(" "),o=e.length;o--;){var n=e[o];"click"===n?t.off("click",f.toggle):"manual"!==n&&(t.off("hover"===n?"mouseenter":"focus",f.enter),t.off("hover"===n?"mouseleave":"blur",f.leave),"button"===m&&"hover"!==n&&t.off(g?"touchstart":"mousedown",f.$onFocusElementMouseDown))}E&&(E.remove(),E=null),clearTimeout(b),w.$destroy()},f.enter=function(){return clearTimeout(b),k="in",y.delay&&y.delay.show?(b=setTimeout(function(){"in"===k&&f.show()},y.delay.show),void 0):f.show()},f.show=function(){w.$emit(y.prefixEvent+".show.before",f);var e=y.container?x:null,o=y.container?null:t;E&&E.remove(),E=f.$element=S(w,function(){}),E.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(y.placement),y.animation&&E.addClass(y.animation),y.type&&E.addClass(y.prefixClass+"-"+y.type),y.customClass&&E.addClass(y.customClass),l.enter(E,e,o,function(){w.$emit(y.prefixEvent+".show",f)}),f.$isShown=w.$isShown=!0,w.$$phase||w.$root&&w.$root.$$phase||w.$digest(),c(function(){f.$applyPlacement(),E.css({visibility:"visible"})}),y.keyboard&&("focus"!==y.trigger?(f.focus(),E.on("keyup",f.$onKeyUp)):t.on("keyup",f.$onFocusKeyUp))},f.leave=function(){return clearTimeout(b),k="out",y.delay&&y.delay.hide?(b=setTimeout(function(){"out"===k&&f.hide()},y.delay.hide),void 0):f.hide()},f.hide=function(e){f.$isShown&&(w.$emit(y.prefixEvent+".hide.before",f),l.leave(E,function(){return w.$emit(y.prefixEvent+".hide",f),e&&"focus"===y.trigger?t[0].blur():void 0}),f.$isShown=w.$isShown=!1,w.$$phase||w.$root&&w.$root.$$phase||w.$digest(),y.keyboard&&null!==E&&E.off("keyup",f.$onKeyUp))},f.toggle=function(){f.$isShown?f.leave():f.enter()},f.focus=function(){E[0].focus()},f.$applyPlacement=function(){if(E){var e=a(),t=E.prop("offsetWidth"),o=E.prop("offsetHeight"),n=r(y.placement,e,t,o);n.top+="px",n.left+="px",E.css(n)}},f.$onKeyUp=function(e){27===e.which&&f.hide()},f.$onFocusKeyUp=function(e){27===e.which&&t[0].blur()},f.$onFocusElementMouseDown=function(e){e.preventDefault(),e.stopPropagation(),f.$isShown?t[0].blur():t[0].focus()},f}function p(e,t){return angular.element((t||document).querySelectorAll(e))}function h(e){return i.when(a.get(e)||r.get(e)).then(function(t){return angular.isObject(t)?(a.put(e,t.data),t.data):t})}var d=String.prototype.trim,g="createTouch"in t.document,$=/ng-bind="/gi;return f}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(e,t,o,n,i){return{restrict:"EAC",scope:!0,link:function(e,t,a){var r={scope:e};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(e){angular.isDefined(a[e])&&(r[e]=a[e])}),angular.forEach(["title"],function(t){a.$observe(t,function(n,a){e[t]=o.trustAsHtml(n),angular.isDefined(a)&&i(function(){l&&l.$applyPlacement()})})}),a.bsTooltip&&e.$watch(a.bsTooltip,function(t,o){angular.isObject(t)?angular.extend(e,t):e.title=t,angular.isDefined(o)&&i(function(){l&&l.$applyPlacement()})},!0),a.bsShow&&e.$watch(a.bsShow,function(e){l&&angular.isDefined(e)&&(angular.isString(e)&&(e=e.match(",?(tooltip),?")),e===!0?l.show():l.hide())});var l=n(t,r);e.$on("$destroy",function(){l&&l.destroy(),r=null,l=null})}}}]);
//# sourceMappingURL=tooltip.min.js.map