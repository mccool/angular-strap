/**
 * angular-strap
 * @version v2.0.5 - 2015-02-24
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF","$parse",function(e,o,n,i,a,l,r,s,c,u){function f(e,i){function a(){$timeout(function(){x.on("click",stopEventPropagation),$body.on("click",v.hide),P=!0},0,!1)}function l(){P&&(x.off("click",stopEventPropagation),$body.off("click",v.hide),P=!1)}function f(){return"body"===b.container?s.offset(b.target[0]||e[0]):s.position(b.target[0]||e[0])}function y(t,e,o,n){var i,a=t.split("-");switch(a[0]){case"right":i={top:e.top+e.height/2-n/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-o/2};break;case"left":i={top:e.top+e.height/2-n/2,left:e.left-o};break;default:i={top:e.top-n,left:e.left+e.width/2-o/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-o}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=e.top-n;break;case"bottom":i.top=e.top+e.height}return i}var v={},w=e[0].nodeName.toLowerCase(),b=v.$options=angular.extend({},t,i);v.$promise=h(b.template);var k=v.$scope=b.scope&&b.scope.$new()||o.$new();if(b.delay)if(angular.isObject(u(b.delay)(k)))b.delay=u(b.delay)(k);else if(angular.isString(b.delay)){var S=b.delay.split(",").map(parseFloat);b.delay=S.length>1?{show:S[0],hide:S[1]}:S[0]}b.title&&(v.$scope.title=b.title),k.$hide=function(){k.$$postDigest(function(){v.hide()})},k.$show=function(){k.$$postDigest(function(){v.show()})},k.$toggle=function(){k.$$postDigest(function(){v.toggle()})},v.$isShown=k.$isShown=!1;var C,E;b.contentTemplate&&(v.$promise=v.$promise.then(function(t){var e=angular.element(t);return h(b.contentTemplate).then(function(t){var o=p('[ng-bind="content"]',e[0]);return o.length||(o=p('[ng-bind="title"]',e[0])),o.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var T,x,D,F;v.$promise.then(function(t){angular.isObject(t)&&(t=t.data),b.html&&(t=t.replace(m,'ng-bind-html="')),t=d.apply(t),D=t,T=n(t),v.init()}),v.init=function(){b.delay&&angular.isNumber(b.delay)&&(b.delay={show:b.delay,hide:b.delay}),"self"===b.container?F=e:angular.isElement(b.container)?F=b.container:b.container&&(F=p(b.container));var t=b.trigger.split(" ");angular.forEach(t,function(t){"click"===t?($("body").on("click",function(t){x&&!x.find(t.target).length&&v.$isShown&&v.$toggle()}),e.on("click",v.toggle)):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",v.enter),e.on("hover"===t?"mouseleave":"blur",v.leave),"button"===w&&"hover"!==t&&e.on(g?"touchstart":"mousedown",v.$onFocusElementMouseDown))}),b.target&&(b.target=angular.isElement(b.target)?b.target:p(b.target)[0]),b.show&&k.$$postDigest(function(){"focus"===b.trigger?e[0].focus():v.show()})},v.destroy=function(){for(var t=b.trigger.split(" "),o=t.length;o--;){var n=t[o];"click"===n?e.off("click",v.toggle):"manual"!==n&&(e.off("hover"===n?"mouseenter":"focus",v.enter),e.off("hover"===n?"mouseleave":"blur",v.leave),"button"===w&&"hover"!==n&&e.off(g?"touchstart":"mousedown",v.$onFocusElementMouseDown))}v.$isShown&&null!==x&&b.autoClose&&l(),x&&(x.remove(),x=null),clearTimeout(C),k.$destroy()},v.enter=function(){return clearTimeout(C),E="in",b.delay&&b.delay.show?(C=setTimeout(function(){"in"===E&&v.show()},b.delay.show),void 0):v.show()},v.show=function(){k.$emit(b.prefixEvent+".show.before",v);var t=b.container?F:null,o=b.container?null:e;x&&x.remove(),x=v.$element=T(k,function(){}),x.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(b.placement),b.animation&&x.addClass(b.animation),b.type&&x.addClass(b.prefixClass+"-"+b.type),b.customClass&&x.addClass(b.customClass),r.enter(x,t,o,function(){k.$emit(b.prefixEvent+".show",v)}),v.$isShown=k.$isShown=!0,k.$$phase||k.$root&&k.$root.$$phase||k.$digest(),c(function(){v.$applyPlacement(),x.css({visibility:"visible"})}),b.keyboard&&("focus"!==b.trigger?(v.focus(),x.on("keyup",v.$onKeyUp)):e.on("keyup",v.$onFocusKeyUp)),b.autoClose&&a()},v.leave=function(){return clearTimeout(C),E="out",b.delay&&b.delay.hide?(C=setTimeout(function(){"out"===E&&v.hide()},b.delay.hide),void 0):v.hide()},v.hide=function(t){v.$isShown&&(k.$emit(b.prefixEvent+".hide.before",v),r.leave(x,function(){return k.$emit(b.prefixEvent+".hide",v),t&&"focus"===b.trigger?e[0].blur():void 0}),v.$isShown=k.$isShown=!1,k.$$phase||k.$root&&k.$root.$$phase||k.$digest(),b.keyboard&&null!==x&&x.off("keyup",v.$onKeyUp),b.autoClose&&null!==x&&l())},v.toggle=function(){v.$isShown?v.leave():v.enter()},v.focus=function(){x[0].focus()},v.$applyPlacement=function(){if(x){var t=f(),e=x.prop("offsetWidth"),o=x.prop("offsetHeight"),n=y(b.placement,t,e,o);n.top+="px",n.left+="px",x.css(n)}},v.$onKeyUp=function(t){27===t.which&&v.hide()},v.$onFocusKeyUp=function(t){27===t.which&&e[0].blur()},v.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),v.$isShown?e[0].blur():e[0].focus()};var P=!1;return v}function p(t,e){return angular.element((e||document).querySelectorAll(t))}function h(t){return i.when(a.get(t)||l.get(t)).then(function(e){return angular.isObject(e)?(a.put(t,e.data),e.data):e})}var d=String.prototype.trim,g="createTouch"in e.document,m=/ng-bind="/gi;return f}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(t,e,o,n,i){return{restrict:"EAC",scope:!0,link:function(t,e,a){var l={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(t){angular.isDefined(a[t])&&(l[t]=a[t])}),angular.forEach(["title"],function(e){a.$observe(e,function(n,a){t[e]=o.trustAsHtml(n),angular.isDefined(a)&&i(function(){r&&r.$applyPlacement()})})}),a.bsTooltip&&t.$watch(a.bsTooltip,function(e,o){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(o)&&i(function(){r&&r.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t){r&&angular.isDefined(t)&&(angular.isString(t)&&(t=t.match(",?(tooltip),?")),t===!0?r.show():r.hide())});var r=n(e,l);t.$on("$destroy",function(){r&&r.destroy(),l=null,r=null})}}}]);
//# sourceMappingURL=tooltip.min.js.map